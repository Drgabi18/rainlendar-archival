<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>cstr.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.7 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>cstr.h</h1><a href="cstr_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/********************************************************************</font>
00002 <font class="comment">        Copyright (c) 2001, Lee Patterson &amp; Ant Works Software</font>
00003 <font class="comment">        http://ssobjects.sourceforge.net</font>
00004 <font class="comment"></font>
00005 <font class="comment">        Original source copyright was lost. Modifications by</font>
00006 <font class="comment">        Lee Patterson.</font>
00007 <font class="comment"></font>
00008 <font class="comment">        created  :  3/10/2000</font>
00009 <font class="comment">        filename :  cstr.h</font>
00010 <font class="comment">        author   :  Lee Patterson (lee@antws.com)</font>
00011 <font class="comment">        </font>
00012 <font class="comment">        purpose  :  String class </font>
00013 <font class="comment">*********************************************************************/</font>
00014 
00015 <font class="preprocessor">#ifndef CSTR_H</font>
00016 <font class="preprocessor"></font><font class="preprocessor">#define CSTR_H</font>
00017 <font class="preprocessor"></font>
00018 <font class="preprocessor">#include &lt;assert.h&gt;</font>
00019 <font class="preprocessor">#include &lt;stdlib.h&gt;</font>
00020 <font class="preprocessor">#include &lt;string.h&gt;</font>
00021 <font class="preprocessor">#include "<a class="code" href="defs_8h.html">defs.h</a>"</font>
00022 
00023 <font class="keywordtype">char</font>* <a class="code" href="cstr_8h.html#a0">strtoupper</a>(<font class="keywordtype">char</font>* pszConvert);
00024 <font class="keywordtype">char</font>* <a class="code" href="cstr_8h.html#a1">strtolower</a>(<font class="keywordtype">char</font>* pszConvert);
00025 <font class="keywordtype">char</font>* <a class="code" href="cstr_8h.html#a2">ultoa</a>(ulong nValue, <font class="keywordtype">char</font>* pszBuffer, uint nRadix=10);
00026 <font class="keywordtype">char</font>* <a class="code" href="cstr_8h.html#a3">ltoa</a>(<font class="keywordtype">long</font> nValue, <font class="keywordtype">char</font>* pszBuffer, uint nRadix=10);
00027 
00028 <font class="keyword">namespace </font>ssobjects
00029 {
00030 
<a name="l00031"></a><a class="code" href="classssobjects_1_1CStr.html">00031</a> <font class="keyword">class </font>CStr
00032 {
00033   <font class="keyword">public</font>:
00034     <font class="keyword">virtual</font> uint <a class="code" href="classssobjects_1_1CStr.html#a0">addError</a>();                    <font class="comment">// Increase the error count and return the new error count.</font>
<a name="l00035"></a><a class="code" href="classssobjects_1_1CStr.html#a1">00035</a>     <font class="keyword">virtual</font> <a class="code" href="classssobjects_1_1CStr.html#a1">~CStr</a>()<font class="keyword"> </font>{ <a class="code" href="classssobjects_1_1CStr.html#a51">empty</a>(); }
00036 
00037   <font class="keyword">public</font>:
00038     <font class="comment">//  Append new string segment to existing string. If nMaxChars is 0, entire string is appended, otherwise only</font>
00039     <font class="comment">//  the first nMaxChars of the string is added. To support client not having to check for NULL strings before calling this</font>
00040     <font class="comment">//  function, it can deal with a NULL value for pszString. If this is the case, the function is a NOOP, and the error count</font>
00041     <font class="comment">//  is NOT increased. This is not considered an error. If appending a string of a known length, a small performance boost may</font>
00042     <font class="comment">//  be seen by specifying the known string length in the parameter nKnownStringLength. This value does NOT include the NULL</font>
00043     <font class="comment">//  terminator. It is valid to call this function with pszString set to itself, or within the existing string.</font>
00044     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a2">append</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString, uint nMaxChars = 0, uint nKnownStringLength = 0);
00045     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a2">append</a>(<font class="keywordtype">char</font> nChar); 
00046     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a4">appendCRLF</a>();
<a name="l00047"></a><a class="code" href="classssobjects_1_1CStr.html#a5">00047</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>(<font class="keywordtype">int</font> nValue)<font class="keyword">      </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>((<font class="keywordtype">long</font>)nValue); }
<a name="l00048"></a><a class="code" href="classssobjects_1_1CStr.html#a6">00048</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>(uint nValue)<font class="keyword">     </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>((ulong)nValue); }
<a name="l00049"></a><a class="code" href="classssobjects_1_1CStr.html#a7">00049</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>(<font class="keywordtype">long</font> nValue)<font class="keyword">     </font>{ <font class="keywordtype">char</font> sz[64]; <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a2">append</a>(<a class="code" href="cstr_8h.html#a3">ltoa</a>(nValue, sz, 10)); }
<a name="l00050"></a><a class="code" href="classssobjects_1_1CStr.html#a8">00050</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>(ulong nValue)<font class="keyword">    </font>{ <font class="keywordtype">char</font> sz[64]; <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a2">append</a>(<a class="code" href="cstr_8h.html#a3">ltoa</a>(nValue, sz, 10)); }
00051 
00052   <font class="keyword">public</font>:
00053     <a class="code" href="classssobjects_1_1CStr.html#a11">CStr</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString, uint nMaxChars = 0);
00054     <a class="code" href="classssobjects_1_1CStr.html#a11">CStr</a>(CStr <font class="keyword">const</font>&amp; str); 
00055     <a class="code" href="classssobjects_1_1CStr.html#a11">CStr</a>();
00056 
00057     <font class="comment">//referancing </font>
00058     <a class="code" href="classssobjects_1_1CStr.html#a12">operator char* </a>() ;
00059     <a class="code" href="classssobjects_1_1CStr.html#a12">operator char* </a>() <font class="keyword">const</font>;
00060 <font class="comment">//        operator const char* () const;</font>
00061 
00062     <font class="comment">// Assign to string string</font>
00063     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a14">format</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszFormat,...);
00064     CStr&amp; <a class="code" href="classssobjects_1_1CStr.html#a15">operator = </a>(CStr <font class="keyword">const</font>&amp; s);
<a name="l00065"></a><a class="code" href="classssobjects_1_1CStr.html#a16">00065</a>     CStr&amp; <a class="code" href="classssobjects_1_1CStr.html#a15">operator = </a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString)<font class="keyword">    </font>{ <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>(pszString); <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
<a name="l00066"></a><a class="code" href="classssobjects_1_1CStr.html#a17">00066</a>     CStr&amp; <a class="code" href="classssobjects_1_1CStr.html#a15">operator = </a>(<font class="keywordtype">int</font> iValue)<font class="keyword">               </font>{ <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>(iValue); <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
<a name="l00067"></a><a class="code" href="classssobjects_1_1CStr.html#a18">00067</a>     CStr&amp; <a class="code" href="classssobjects_1_1CStr.html#a15">operator = </a>(uint nValue)<font class="keyword">              </font>{ <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>(nValue); <font class="keywordflow">return</font> *<font class="keyword">this</font>; }
00068     
00069     <font class="comment">// Concatenation of string</font>
<a name="l00070"></a><a class="code" href="classssobjects_1_1CStr.html#a19">00070</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a19">operator += </a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString)<font class="keyword">   </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a2">append</a>(pszString); }
<a name="l00071"></a><a class="code" href="classssobjects_1_1CStr.html#a20">00071</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a20">operator &lt;&lt; </a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString)<font class="keyword">   </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a2">append</a>(pszString); }
<a name="l00072"></a><a class="code" href="classssobjects_1_1CStr.html#a21">00072</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a19">operator += </a>(<font class="keywordtype">char</font> nChar)<font class="keyword">              </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a2">append</a>(nChar); }
<a name="l00073"></a><a class="code" href="classssobjects_1_1CStr.html#a22">00073</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a20">operator &lt;&lt; </a>(<font class="keywordtype">char</font> nChar)<font class="keyword">              </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a2">append</a>(nChar); }
<a name="l00074"></a><a class="code" href="classssobjects_1_1CStr.html#a23">00074</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a19">operator += </a>(<font class="keywordtype">int</font> nValue)<font class="keyword">              </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>(nValue); }
<a name="l00075"></a><a class="code" href="classssobjects_1_1CStr.html#a24">00075</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a20">operator &lt;&lt; </a>(<font class="keywordtype">int</font> nValue)<font class="keyword">              </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>(nValue); }
<a name="l00076"></a><a class="code" href="classssobjects_1_1CStr.html#a25">00076</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a19">operator += </a>(uint nValue)<font class="keyword">             </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>(nValue); }
<a name="l00077"></a><a class="code" href="classssobjects_1_1CStr.html#a26">00077</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a20">operator &lt;&lt; </a>(uint nValue)<font class="keyword">             </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a5">appendNumber</a>(nValue); }
00078 
00079     <font class="comment">// Comparison of string contents</font>
00080     <font class="keywordtype">bool</font> <a class="code" href="classssobjects_1_1CStr.html#a27">operator == </a>(<font class="keywordtype">int</font> nValue) <font class="keyword">const</font>;
00081     <font class="keywordtype">bool</font> <a class="code" href="classssobjects_1_1CStr.html#a27">operator == </a>(uint nValue) <font class="keyword">const</font>;
00082     <font class="keywordtype">bool</font> <a class="code" href="classssobjects_1_1CStr.html#a27">operator == </a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString) <font class="keyword">const</font>;
00083     <font class="keywordtype">bool</font> <a class="code" href="classssobjects_1_1CStr.html#a30">operator != </a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString) <font class="keyword">const</font>;
00084     
00085 
00086     <font class="comment">// find out information about this object</font>
00087     <font class="keywordtype">bool</font> <a class="code" href="classssobjects_1_1CStr.html#a31">isEmpty</a>() <font class="keyword">const</font>;
00088     <font class="keywordtype">bool</font> <a class="code" href="classssobjects_1_1CStr.html#a32">isNotEmpty</a>() <font class="keyword">const</font>;
00089     uint <a class="code" href="classssobjects_1_1CStr.html#a33">getCharCount</a>(<font class="keywordtype">char</font> nChar) <font class="keyword">const</font>;        <font class="comment">// Returns the number of times a particular character is found in the string.</font>
00090 
00091 
00092     <font class="comment">//return a referance or set a charactoer at specified index into string </font>
00093     <font class="keywordtype">char</font>&amp; <a class="code" href="classssobjects_1_1CStr.html#a34">charAt</a>(uint nIndex) <font class="keyword">const</font>;
00094     <font class="keywordtype">void</font> <a class="code" href="classssobjects_1_1CStr.html#a34">charAt</a>(uint nIndex, <font class="keywordtype">char</font> nChar);
00095 
00096 
00097     <font class="comment">//Compairs. Returns zero if the strings are identical, -1 if this CStr object is less</font>
00098     <font class="comment">//than pszString, or 1 if this CStr object is greater than pszString. </font>
00099     <font class="comment">//If either string is NULL or empty, 2 will be returned.*/</font>
00100     <font class="keywordtype">int</font> <a class="code" href="classssobjects_1_1CStr.html#a36">compare</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString) <font class="keyword">const</font>;
00101     <font class="keywordtype">int</font> <a class="code" href="classssobjects_1_1CStr.html#a37">compareNoCase</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString) <font class="keyword">const</font>;
00102 
00103 
00104     <font class="comment">// Find first occurence of character or substring in string. </font>
00105     <font class="comment">//Returns index into string if found, -1 otherwise.</font>
00106     <font class="keywordtype">int</font> <a class="code" href="classssobjects_1_1CStr.html#a38">find</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszSubString) <font class="keyword">const</font>;
00107     <font class="keywordtype">int</font> <a class="code" href="classssobjects_1_1CStr.html#a38">find</a>(<font class="keywordtype">char</font> nChar) <font class="keyword">const</font>;
00108 
00109 
00110     <font class="comment">/* Substring extraction, returns a new CStr object with the first nCount of this strings characters in it. If this string</font>
00111 <font class="comment">       is less that nCount in length, the entire string will be returned.*/</font>
00112     CStr <a class="code" href="classssobjects_1_1CStr.html#a40">left</a>(uint nCount) <font class="keyword">const</font>;
00113     CStr <a class="code" href="classssobjects_1_1CStr.html#a41">mid</a>(uint nFirst, uint nCount = 0) <font class="keyword">const</font>;
00114     CStr <a class="code" href="classssobjects_1_1CStr.html#a42">right</a>(uint nCount) <font class="keyword">const</font>;
00115 
00116     <font class="comment">// Remote all spaces from left, right or both sides of a string.</font>
00117     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a43">trimRight</a>();
00118     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a44">trimLeft</a>();
00119     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a45">trim</a>();
00120 
00121     <font class="comment">// Change case of entire string</font>
00122     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a46">makeLower</a>();
00123     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a47">makeUpper</a>();
00124 
00125 
00126     <font class="comment">/* Get the length of the string, or if bBuffer is true, the amount of allocated buffer memory. This function could</font>
00127 <font class="comment">       return 0 when the internal string actually has length. See the String(no parameters) function for more information</font>
00128 <font class="comment">       about this feature used to avoid unneeded memory allocations.*/</font>
00129     uint <a class="code" href="classssobjects_1_1CStr.html#a48">getLength</a>(<font class="keywordtype">bool</font> bBuffer = <font class="keyword">false</font>) <font class="keyword">const</font>;
<a name="l00130"></a><a class="code" href="classssobjects_1_1CStr.html#a49">00130</a>     uint <a class="code" href="classssobjects_1_1CStr.html#a49">strlen</a>()<font class="keyword"> </font>{<font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a48">getLength</a>();}
00131 
00132     <font class="comment">// Append a character to the end of the string if the string does not already</font>
00133     <font class="comment">// end with that character. </font>
00134     <font class="comment">// If the string already ends with the character specified by nChar, this</font>
00135     <font class="comment">// function will be a NOOP. This function will only succeed on a string that </font>
00136     <font class="comment">// already has length. It will not set the first character of an otherwise empty </font>
00137     <font class="comment">// string to nChar.*/</font>
00138     <font class="keywordtype">void</font> <a class="code" href="classssobjects_1_1CStr.html#a50">endWith</a>(<font class="keywordtype">char</font> nChar);
00139 
00140 
00141     <font class="comment">// Free the internal buffer and reset internal variables. If bFreeBuffer is true, the internal buffer will be free'd,</font>
00142     <font class="comment">// otherwise this function will only reset internal members so the previously allocated memory can be re-used. If the internal</font>
00143     <font class="comment">// buffer is kept for future use, this class guards against calls that make use of it. In other words, even if the internal</font>
00144     <font class="comment">// pointer m_pszString is not NULL, calls to getLength() or the comparison functions for instance will behave like it is NULL.</font>
00145     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a51">empty</a>(<font class="keywordtype">bool</font> bFreeBuffer = <font class="keyword">true</font>, <font class="keywordtype">bool</font> bResetErrorCount = <font class="keyword">true</font>);
00146 
00147 
00148     <font class="comment">/* Remove a section from the center of this string. nFirst is the index into this string of the first character to be</font>
00149 <font class="comment">       removed. nRemoveCount is the number of characters to remove. For example, if this class holds the string "Testing" and</font>
00150 <font class="comment">       you pass 1 as the first character to remove and 5 as the remove count, the resulting string would be "tg". Starting</font>
00151 <font class="comment">       with the "e" in "Testing" which is at index 1 in the string, 5 characters, including the "e" were removed. Returns</font>
00152 <font class="comment">       internal string buffer on success, NULL on failure. On failure, the internal string is not modified. If nRemoveCount</font>
00153 <font class="comment">       would extend beyond the length of the string, all characters after nFirst (inclusive) will be removed. If nFirst is</font>
00154 <font class="comment">       0 and nRemoveCount is the string length (or greater), the string will be emptied and NULL returned. This function</font>
00155 <font class="comment">       never results in a memory allocation, since it shortens the string.*/</font>
00156     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a52">removeSection</a>(uint nFirst, uint nRemoveCount = 1);
00157 
00158     <font class="comment">/* Set a pointer to an externally allocated C style string (allocated with malloc()) into object. This can be done</font>
00159 <font class="comment">       to replace a string pointer with a previously "stolen" pointer from the StealBuffer() function. This class will</font>
00160 <font class="comment">       then assume ownership of the string, deleting it as needed. The length of the allocated memory MUST be given to this</font>
00161 <font class="comment">       class for the function to succeed. The C string essentially becomes a VString object, so the allocated memory size</font>
00162 <font class="comment">       must be given, and it must be at least 1 byte longer than the string to be valid.*/</font>
00163     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a53">replaceBuffer</a>(<font class="keywordtype">char</font>* pszString, uint nAllocatedMemorySize, uint nKnownStringLength = 0);
00164     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a53">replaceBuffer</a>(CStr&amp; strFrom);
00165     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a55">replaceCharacters</a>(<font class="keywordtype">char</font> nFind, <font class="keywordtype">char</font> nReplacement);
00166 
00167     <font class="comment">/* Replace the first occurance of nChar with nReplacement in the string. The default for nReplacement terminates</font>
00168 <font class="comment">       the string. The return value is the point at which the string was terminated on success, NULL on failure.*/</font>
<a name="l00169"></a><a class="code" href="classssobjects_1_1CStr.html#a56">00169</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a56">replaceFirstChar</a>(<font class="keywordtype">char</font> nChar, <font class="keywordtype">char</font> nReplacement = <font class="charliteral">'\0'</font>)<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#b2">replaceFirstOrLastChar</a>(nChar, nReplacement, <font class="keyword">true</font>); }
00170 
00171     <font class="comment">/* Replace the last occurance of nChar with nReplacement in the string. The default for nReplacement terminates</font>
00172 <font class="comment">       the string. The return value is the point at which the string was terminated on success, NULL on failure.*/</font>
<a name="l00173"></a><a class="code" href="classssobjects_1_1CStr.html#a57">00173</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a57">replaceLastChar</a>(<font class="keywordtype">char</font> nChar, <font class="keywordtype">char</font> nReplacement = <font class="charliteral">'\0'</font>)<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#b2">replaceFirstOrLastChar</a>(nChar, nReplacement, <font class="keyword">false</font>); }
00174 
00175 
00176     <font class="comment">// Return the internal error count. This value is incremented anytime a memory allocation fails, or externally</font>
00177     <font class="comment">// by calls to AddError().</font>
<a name="l00178"></a><a class="code" href="classssobjects_1_1CStr.html#a58">00178</a>     uint <a class="code" href="classssobjects_1_1CStr.html#a58">getErrorCount</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> m_nErrorCount; }
00179 
00180     <font class="comment">/* Return a reference to the granularity size. This is how much memory, during appends, is allocated each time an</font>
00181 <font class="comment">       append or allocation operation would require more memory than what is currently allocated. Any value, other than 0 is valid</font>
00182 <font class="comment">       as the granularity setting. The larger the value, the more memory will be allocated each time a new block is required,</font>
00183 <font class="comment">       but fewer allocations are needed. A smaller number decreases total memory usage, at the expense of more frequent</font>
00184 <font class="comment">       reallocations. The default value is 64 bytes, and this will be used if set to 0.*/</font>
<a name="l00185"></a><a class="code" href="classssobjects_1_1CStr.html#a59">00185</a>     uint&amp; <a class="code" href="classssobjects_1_1CStr.html#a59">getGranularity</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> (uint&amp;)m_nGranularity; }
00186 
00187 
00188 
00189 
00190     <font class="comment">/* Steal the C-Style string buffer. Calling code takes ownership of string pointer and must free it when done using the CRT</font>
00191 <font class="comment">       function free(). On exit, this class is a newly initialized state.*/</font>
00192     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a60">stealBuffer</a>();
00193 
00194     <font class="comment">/* Get the internal string buffer. It is important to note that a valid buffer pointer might be returned from this</font>
00195 <font class="comment">       function, even though the CStr class knows the specified length is 0. The reason is that internal buffers can be</font>
00196 <font class="comment">       reused to avoid unneeded memory allocations. For instance, if you call the Empty() method and tell it not to release</font>
00197 <font class="comment">       the internal buffer, the internal m_nLength member is set to 0 but the internal string pointer m_pszString is not</font>
00198 <font class="comment">       touched. Therefore, calling this function would return the internal pointer. This could also be the case where memory</font>
00199 <font class="comment">       for a string is preallocated with another String() function but not yet populated, or populated but before the</font>
00200 <font class="comment">       UpdateLength() function is called to set the known string length.*/</font>
<a name="l00201"></a><a class="code" href="classssobjects_1_1CStr.html#a61">00201</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>()<font class="keyword"> const </font>{ <font class="keywordflow">return</font> m_pszString; }
00202 
00203     <font class="comment">/* Save pszString in class and returns pointer to buffer if a string is held. If nExtraBytes is set, that much</font>
00204 <font class="comment">       more memory will be allocated in addition to the length of pszString. pszString can be NULL and still have memory</font>
00205 <font class="comment">       allocated if nExtraBytes is not 0. Using the function this way is a good way to dynamically allocate heap memory</font>
00206 <font class="comment">       and still have this class free the memory when no longer needed. The allocated memory will be 0 filled. If</font>
00207 <font class="comment">       extra bytes are allocated, they will be filled with 0's. If this function is used to allocate memory only (pszString</font>
00208 <font class="comment">       set to NULL and nExtraBytes set to non-0), UpdateLength() should be called as soon as the class contains a valid</font>
00209 <font class="comment">       string so that future processing using this class is not harmed.</font>
00210 <font class="comment">       It should be noted that for string that are not likely to change size, this function differs from Append() by not</font>
00211 <font class="comment">       allocating more memory than is required. This does not affect future appends which can still be done, it merely</font>
00212 <font class="comment">       means that for strings not likely to change, it uses a more efficient storage scheme. If pszString is not NULL and</font>
00213 <font class="comment">       nMaxChars is given, only the number of character specified will be copied to the string, although the extra bytes will</font>
00214 <font class="comment">       still be allocated if given. A very slight performance boost can be realized if the length of pszString is known when</font>
00215 <font class="comment">       this function is called, and can be specified as the nKnownStringLength parameter. If this function fails to allocate</font>
00216 <font class="comment">       memory, it will return NULL, however the previous string held by this class will be left intact and safe.*/</font>
00217     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString, uint nExtraBytes = 0, uint nMaxChars = 0, uint nKnownStringLength = 0);
00218 
00219     <font class="comment">// Set a value into string</font>
<a name="l00220"></a><a class="code" href="classssobjects_1_1CStr.html#a63">00220</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>(<font class="keywordtype">int</font> nValue)<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>((<font class="keywordtype">long</font>)nValue); }
<a name="l00221"></a><a class="code" href="classssobjects_1_1CStr.html#a64">00221</a>     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>(uint nValue)<font class="keyword"> </font>{ <font class="keywordflow">return</font> <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>((ulong)nValue); }
00222     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>(<font class="keywordtype">long</font> nValue);
00223     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#a61">String</a>(ulong nValue);
00224     
00225     <font class="comment">/* This function should be called anytime the length of the string is altered outside of the class. If the exact length</font>
00226 <font class="comment">       of the string is known (or you want to lie about it), pass a non-0 value for nLength. Passing 0 causes this function to</font>
00227 <font class="comment">       determine the length of the string. nLength cannot be larger than the real string length, although it can be smaller. Since</font>
00228 <font class="comment">       this class can be used to store non-string data as a string, which could contain embedded 0 terminators, this class cannot</font>
00229 <font class="comment">       check the validity of nLength when non-0. Care must be taken here to set the length to the exact length of the data.</font>
00230 <font class="comment">       This class will verify that nLength is not larger than the internally allocated length.*/</font>
00231     <font class="keywordtype">void</font> <a class="code" href="classssobjects_1_1CStr.html#a67">updateLength</a>(uint nLength = 0);
00232 
00233   <font class="keyword">protected</font>:
00234     <font class="comment">// Copy internal string if pszString is within us.</font>
00235     CStr* <a class="code" href="classssobjects_1_1CStr.html#b0">duplicateOverlap</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* pszString, <font class="keywordtype">bool</font>&amp; bDuplicateRequired);
00236 
00237     <font class="comment">// Initialize member variables to default values, or copy from another object.</font>
00238     <font class="keywordtype">void</font> <a class="code" href="classssobjects_1_1CStr.html#b1">init</a>(CStr <font class="keyword">const</font>* pExisting = NULL);
00239         
00240     <font class="comment">// Replace the first or last occurance of nChar with nReplacement in the string.</font>
00241         
00242     <font class="keywordtype">char</font>* <a class="code" href="classssobjects_1_1CStr.html#b2">replaceFirstOrLastChar</a>(<font class="keywordtype">char</font> nChar, <font class="keywordtype">char</font> nReplacement, <font class="keywordtype">bool</font> bFirst);
00243 
00244     <font class="comment">// Embedded Member(s).</font>
<a name="l00245"></a><a class="code" href="classssobjects_1_1CStr.html#n0">00245</a>     <font class="keywordtype">char</font>*           m_pszString;
<a name="l00246"></a><a class="code" href="classssobjects_1_1CStr.html#n1">00246</a>     uint            m_nLength;
<a name="l00247"></a><a class="code" href="classssobjects_1_1CStr.html#n2">00247</a>     uint            m_nAllocLength;
<a name="l00248"></a><a class="code" href="classssobjects_1_1CStr.html#n3">00248</a>     uint            m_nGranularity;
<a name="l00249"></a><a class="code" href="classssobjects_1_1CStr.html#n4">00249</a>     uint            m_nErrorCount;
00250 };
00251 
<a name="l00255"></a><a class="code" href="classssobjects_1_1FmtString.html">00255</a> <font class="keyword">class </font>FmtString : <font class="keyword">public</font> CStr
00256 {
00257   <font class="keyword">public</font>:
00258     <font class="comment">//construct with a printf style format</font>
00259     <a class="code" href="classssobjects_1_1FmtString.html#a0">FmtString</a>(<font class="keyword">const</font> <font class="keywordtype">char</font>* fmt,...);
00260 };
00261 
00262 };
00263 
00264 
00265 <font class="preprocessor">#endif</font>
00266 <font class="preprocessor"></font>
00267 
</pre></div><hr><address><small>Generated at Tue Sep 25 00:26:36 2001 for SimpleServerObjects by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.7 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
