<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>packetmessageque.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.7 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>packetmessageque.h</h1><a href="packetmessageque_8h.html">Go to the documentation of this file.</a><div class="fragment"><pre>00001 <font class="comment">/********************************************************************</font>
00002 <font class="comment">       Copyright (c) 2001, Lee Patterson &amp; Ant Works Software</font>
00003 <font class="comment">       http://ssobjects.sourceforge.net</font>
00004 <font class="comment"></font>
00005 <font class="comment">       filename :  packetmessageque.h</font>
00006 <font class="comment">       author   :  Lee Patterson (lee@antws.com)</font>
00007 <font class="comment"></font>
00008 <font class="comment">       purpose  :  This que is used to hold incoming messages. Each message</font>
00009 <font class="comment">                   contains a pointer to the incoming packet, and a pointer to</font>
00010 <font class="comment">                   the socket that input came from. Output will normally be </font>
00011 <font class="comment">                   sent to this socket.</font>
00012 <font class="comment">*********************************************************************/</font>
00013 
00014 <font class="preprocessor">#ifndef PACKETMESSAGEQUE_H</font>
<a name="l00015"></a><a class="code" href="packetmessageque_8h.html#a0">00015</a> <font class="preprocessor"></font><font class="preprocessor">#define PACKETMESSAGEQUE_H</font>
00016 <font class="preprocessor"></font>
00017 <font class="preprocessor">#include "<a class="code" href="mcl_8h.html">mcl.h</a>"</font>
00018 <font class="preprocessor">#include "<a class="code" href="generalexception_8h.html">generalexception.h</a>"</font>
00019 <font class="preprocessor">#include "<a class="code" href="packetbuffer_8h.html">packetbuffer.h</a>"</font>
00020 <font class="preprocessor">#include "<a class="code" href="threadutils_8h.html">threadutils.h</a>"</font>
00021 <font class="preprocessor">#include "<a class="code" href="socketinstance_8h.html">socketinstance.h</a>"</font>
00022 <font class="preprocessor">#include "<a class="code" href="linkedlist_8h.html">linkedlist.h</a>"</font>
00023 
<a name="l00024"></a><a class="code" href="packetmessageque_8h.html#a1">00024</a> <font class="preprocessor">#define throwPacketMessageException(m) (throw PacketMessageException(m,__FILE__,__LINE__))</font>
00025 <font class="preprocessor"></font>
00026 
00027 <font class="keyword">namespace </font>ssobjects
00028 {
00029  
<a name="l00033"></a><a class="code" href="classssobjects_1_1PacketMessageException.html">00033</a> <font class="keyword">class </font>PacketMessageException : <font class="keyword">public</font> GeneralException
00034 {
00035   <font class="keyword">public</font>: <font class="comment">// Constructor/destructor</font>
<a name="l00036"></a><a class="code" href="classssobjects_1_1PacketMessageException.html#a0">00036</a>     <a class="code" href="classssobjects_1_1PacketMessageException.html#a0">PacketMessageException</a>(<font class="keywordtype">char</font>* pchMessage,<font class="keyword">const</font> <font class="keywordtype">char</font>* pFname,<font class="keyword">const</font> <font class="keywordtype">int</font> iLine) 
00037       : <a class="code" href="classssobjects_1_1GeneralException.html#a0">GeneralException</a>(pchMessage,pFname,iLine)<font class="keyword"></font>{};
00038 };
00039 
<a name="l00049"></a><a class="code" href="classssobjects_1_1PacketMessage.html">00049</a> <font class="keyword">class </font>PacketMessage
00050 {
00051   <font class="keyword">public</font>:             <font class="comment">//constructor / deconstructor</font>
00052     <a class="code" href="classssobjects_1_1PacketMessage.html#a0">PacketMessage</a>(SocketInstance* <font class="keyword">const</font> s,PacketBuffer* <font class="keyword">const</font> p);
00053     <font class="keyword">virtual</font> <a class="code" href="classssobjects_1_1PacketMessage.html#a1">~PacketMessage</a>();
00054 
00055   <font class="keyword">public</font>:             <font class="comment">//functions</font>
<a name="l00056"></a><a class="code" href="classssobjects_1_1PacketMessage.html#a2">00056</a>     PacketBuffer*         <a class="code" href="classssobjects_1_1PacketMessage.html#a2">packet</a>() <font class="keyword">const</font>      
00057     {<font class="keywordflow">return</font> m_pPacket;}
00058     
<a name="l00059"></a><a class="code" href="classssobjects_1_1PacketMessage.html#a3">00059</a>     SocketInstance*       <a class="code" href="classssobjects_1_1PacketMessage.html#a3">socket</a>() <font class="keyword">const</font>      
00060     {<font class="keywordflow">return</font> m_pSocket;}
00061     
<a name="l00062"></a><a class="code" href="classssobjects_1_1PacketMessage.html#a4">00062</a>     uint                  <a class="code" href="classssobjects_1_1PacketMessage.html#a4">id</a>()     <font class="keyword">const</font>      
00063 
00064     {<font class="keywordflow">return</font> m_nID;}
00065 
00066   <font class="keyword">private</font>:            <font class="comment">//thread data and methods</font>
00067     <font class="keyword">static</font> unsigned32 m_nUniqueID;
00068     <font class="keyword">static</font> Lock       m_lockID;
00069     unsigned32        uniqueID();
00070 
00071    <font class="keyword">private</font>:            <font class="comment">//regular data</font>
00072     unsigned32              m_nID;
00073     <font class="keywordtype">bool</font>                    m_bUsed;
00074     SocketInstance*         m_pSocket;
00075     PacketBuffer*           m_pPacket;
00076 
00077   <font class="keyword">private</font>:
00078     <font class="comment">//unused overloads</font>
00079     <a class="code" href="classssobjects_1_1PacketMessage.html#a0">PacketMessage</a>(<font class="keyword">const</font> PacketMessage&amp;);
00080     PacketMessage&amp; operator=(<font class="keyword">const</font> PacketMessage&amp;);
00081 };
00082 
<a name="l00083"></a><a class="code" href="packetmessageque_8h.html#a2">00083</a> <font class="preprocessor">#define throwPacketMessageQueException(m) (throw PacketMessageQueException(m,__FILE__,__LINE__))</font>
00084 <font class="preprocessor"></font> 
<a name="l00088"></a><a class="code" href="classssobjects_1_1MsgQueException.html">00088</a> <font class="keyword">class </font>MsgQueException : <font class="keyword">public</font> GeneralException
00089 {
00090   <font class="keyword">public</font>: <font class="comment">// Constructor/destructor</font>
<a name="l00091"></a><a class="code" href="classssobjects_1_1MsgQueException.html#a0">00091</a>     <a class="code" href="classssobjects_1_1MsgQueException.html#a0">MsgQueException</a>(<font class="keywordtype">char</font>* pchMessage,<font class="keyword">const</font> <font class="keywordtype">char</font>* pFname,<font class="keyword">const</font> <font class="keywordtype">int</font> iLine) 
00092       : <a class="code" href="classssobjects_1_1GeneralException.html#a0">GeneralException</a>(pchMessage,pFname,iLine)<font class="keyword"></font>{};
00093 };
00094 
00095 
<a name="l00120"></a><a class="code" href="classssobjects_1_1PacketMessageQue.html">00120</a> <font class="keyword">class </font>PacketMessageQue 
00121 {
00122   <font class="keyword">private</font>:
00123     <font class="keywordtype">bool</font>            m_bSetEvents; 
00124     LinkedList&lt;PacketMessage&gt;   m_listMsgs;   
00125     Lock            m_lock;       
00126     Event           m_event;      
00127 
00128   <font class="keyword">public</font>:
00129     <a class="code" href="classssobjects_1_1PacketMessageQue.html#a0">PacketMessageQue</a>(<font class="keywordtype">bool</font> bSetEvents=<font class="keyword">true</font>);
00130     <font class="keyword">virtual</font> <a class="code" href="classssobjects_1_1PacketMessageQue.html#a1">~PacketMessageQue</a>();
00131 
00132   <font class="keyword">public</font>:
00133     <font class="keywordtype">void</font>            <a class="code" href="classssobjects_1_1PacketMessageQue.html#a2">add</a>(PacketMessage *);   
00134     PacketMessage*          <a class="code" href="classssobjects_1_1PacketMessageQue.html#a3">get</a>();          
00135     <font class="keywordtype">bool</font>            <a class="code" href="classssobjects_1_1PacketMessageQue.html#a4">isEmpty</a>();      
00136     <font class="keywordtype">void</font>            <a class="code" href="classssobjects_1_1PacketMessageQue.html#a5">purge</a>();        
00137 <font class="preprocessor">#if 0</font>
00138 <font class="preprocessor"></font>    <font class="comment">//not tested</font>
00139     <font class="keywordtype">bool</font>            signal();
00140     <font class="keywordtype">bool</font>            reset();
00141     <font class="keywordtype">bool</font>            pulse();
00142     unsigned32      wait(uint nMilliseconds=INFINITE);
00143 <font class="preprocessor">#endif</font>
00144 <font class="preprocessor"></font>  <font class="keyword">private</font>:
00145     <font class="comment">//unused overloads</font>
00146     <a class="code" href="classssobjects_1_1PacketMessageQue.html#a0">PacketMessageQue</a>(<font class="keyword">const</font> PacketMessageQue&amp;);
00147     PacketMessageQue&amp; operator=(<font class="keyword">const</font> PacketMessageQue&amp;);
00148 };
00149 
00150 };
00151 <font class="preprocessor">#endif</font>
</font></pre></div><hr><address><small>Generated at Tue Sep 25 00:26:36 2001 for SimpleServerObjects by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.7 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
