<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ssobjects::BufferedSocket class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.7 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ssobjects::BufferedSocket  Class Reference</h1><code>#include &lt;<a class="el" href="bufferedsocket_8h-source.html">bufferedsocket.h</a>&gt;</code>
<p>
<p>Inheritance diagram for ssobjects::BufferedSocket::
<p><center><img src="classssobjects_1_1BufferedSocket.gif" usemap="#ssobjects::BufferedSocket_map" border="0"></center>
<map name="ssobjects::BufferedSocket_map">
<area href="classssobjects_1_1SocketInstance.html" alt="ssobjects::SocketInstance" shape="rect" coords="0,0,157,24">
</map>
<a href="classssobjects_1_1BufferedSocket-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td nowrap align=right valign=top>enum &nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#s2">ReleaseFlag</a> { <a class="el" href="classssobjects_1_1BufferedSocket.html#s2s0">autoRelease</a>, 
<a class="el" href="classssobjects_1_1BufferedSocket.html#s2s1">noRelease</a>
 }</td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a0">BufferedSocket</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Construct the socket.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a1">~BufferedSocket</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Destroys the socket, and closes the connection.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a2">sendPacket</a> (<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> *pPacket, const <a class="el" href="classssobjects_1_1BufferedSocket.html#s2">ReleaseFlag</a> release=noRelease)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Transmits the packet.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a3">sendPacket</a> (<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> &amp;packet)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Transmits the packet.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a>*&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a4">recvPacket</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Reads and waits for a full <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a>*&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a5">recvPacket</a> (<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> &amp;packet)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Reads and waits for a full <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object.</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a6">setTimeout</a> (const int iTimeOut)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sets how long to wait for incoming data before throwing.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a7">operator&lt;&lt;</a> (<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> &amp;packet)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Transmits the packet.</em> <a href="#a7">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a8">operator&lt;&lt;</a> (<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> *ppacket)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Transmits the packet.</em> <a href="#a8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classssobjects_1_1BufferedSocket.html#a9">operator&gt;&gt;</a> (<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> &amp;packet)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Reads and waits for a full <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object.</em> <a href="#a9">More...</a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Base class for sending and receiving data send as PacketBuffers.
<p>
When data is sent, not all data is garenteed to be sent in the one call.  (See man page for send(3) for details.)
<p>
When data is read, or received, not all the data is garenteed to be  read in one recv call. (See man page for recv(3) for details.)
<p>
To make life easier, the functionality for sending and receiving an  entire <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object, without multiple calls to <a class="el" href="classssobjects_1_1SocketInstance.html#a11">send</a>()/<a class="el" href="classssobjects_1_1SocketInstance.html#a13">recv</a>() is  wrapped up in this object.
<p>
Also, if 3 packets were sent, but only 2 1/2 were read, <a class="el" href="classssobjects_1_1BufferedSocket.html">BufferedSocket</a> will parse out the two, and keep the data from 3 till the next call.
<p>
<dl compact><dt>
<b><a class="el" href="todo.html#_todo000003">Todo: </a></b><dd>
 Verify it's send(3) and not send(2). </dl> 
<p>
<hr><h2>Member Enumeration Documentation</h2>
<a name="s2" doxytag="ssobjects::BufferedSocket::ReleaseFlag"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
enum ssobjects::BufferedSocket::ReleaseFlag
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt>
<b>Enumeration values:</b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><a name="s2s0" doxytag="autoRelease"></a><em>autoRelease</em>
&nbsp;</td><td>
</td></tr>
<tr><td valign=top><a name="s2s1" doxytag="noRelease"></a><em>noRelease</em>
&nbsp;</td><td>
</td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="ssobjects::BufferedSocket::BufferedSocket"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
ssobjects::BufferedSocket::BufferedSocket (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Construct the socket.
<p>
<dl compact><dt>
<b>Exceptions: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>BufferedSocketException</em>
&nbsp;</td><td>
 If memory for the buffer was not available. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a1" doxytag="ssobjects::BufferedSocket::~BufferedSocket"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
ssobjects::BufferedSocket::~BufferedSocket (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destroys the socket, and closes the connection.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a8" doxytag="ssobjects::BufferedSocket::operator<<"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void ssobjects::BufferedSocket::operator&lt;&lt; (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> * <em>ppacket</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Transmits the packet.
<p>
    </td>
  </tr>
</table>
<a name="a7" doxytag="ssobjects::BufferedSocket::operator<<"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void ssobjects::BufferedSocket::operator&lt;&lt; (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> &amp; <em>packet</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Transmits the packet.
<p>
    </td>
  </tr>
</table>
<a name="a9" doxytag="ssobjects::BufferedSocket::operator>>"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
void ssobjects::BufferedSocket::operator&gt;&gt; (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> &amp; <em>packet</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads and waits for a full <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object.
<p>
    </td>
  </tr>
</table>
<a name="a5" doxytag="ssobjects::BufferedSocket::recvPacket"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> * ssobjects::BufferedSocket::recvPacket (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> &amp; <em>packet</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads and waits for a full <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object.
<p>
Reads data into the referenced packet. This isn't as effiecent as using  <a class="el" href="classssobjects_1_1BufferedSocket.html#a4">recvPacket</a>(). You are gerented to receive a full <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object.<dl compact><dt>
<b>Exceptions: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>SocketInstanceException</em>
&nbsp;</td><td>
 If there is a read error, or a connection was closed. </td></tr>
<tr><td valign=top><em>BufferedSocketException</em>
&nbsp;</td><td>
 If a bad packet was read. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a4" doxytag="ssobjects::BufferedSocket::recvPacket"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> * ssobjects::BufferedSocket::recvPacket (
          </b></td>
          <td valign="bottom"><b>
)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reads and waits for a full <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object.
<p>
Reads data and returns a pointer to a new <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object. You are responsible for  deleting the returned packet when you are finished with it.
<p>
You are gerented to receive a full <a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> object.
<p>
When data is read in, some verification is done to ensure that the packet header is  valid. There is no way to validate the buffer portion of the packet. A test is done on the header to see if the cookie (just a constant value passed all the time) and to see the the command looks like it might be valid. There is no way to tell other then  if the command is zero (<a class="el" href="classssobjects_1_1PacketBuffer.html#s21s0">PacketBuffer::pcInvalid</a>). Note that a common problem with getting  <a class="el" href="classssobjects_1_1PacketBuffer.html#s21s0">PacketBuffer::pcInvalid</a> as a command is not setting the command in a packet before sending it.
<p>
If a packet is sent with a size greater then 3000 bytes, the read operation will reset the internal buffer, and throw an exception. This is done to prevent bogus packets overflowing the buffer.<dl compact><dt>
<b>Exceptions: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>SocketInstanceException</em>
&nbsp;</td><td>
 If there is a read error, or a connection was closed. </td></tr>
<tr><td valign=top><em>BufferedSocketException</em>
&nbsp;</td><td>
 If a bad packet was read. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a3" doxytag="ssobjects::BufferedSocket::sendPacket"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int ssobjects::BufferedSocket::sendPacket (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> &amp; <em>packet</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Transmits the packet.
<p>
    </td>
  </tr>
</table>
<a name="a2" doxytag="ssobjects::BufferedSocket::sendPacket"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int ssobjects::BufferedSocket::sendPacket (
          </b></td>
          <td valign="bottom"><b>
<a class="el" href="classssobjects_1_1PacketBuffer.html">PacketBuffer</a> * <em>pPacket</em>, 
          </b></td>
        </tr>
        <tr>
          <td></td>
          <td><b>
const <a class="el" href="classssobjects_1_1BufferedSocket.html#s2">ReleaseFlag</a> <em>release</em> = noRelease&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Transmits the packet.
<p>
Sends the data pointed to by pPacket, and optionaly destroys the memory pointed to by pPacket  once the data is sent. All data is garented to be sent.<dl compact><dt>
<b>Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>pPacket</em>
&nbsp;</td><td>
Packet you are sending. </td></tr>
<tr><td valign=top><em>release</em>
&nbsp;</td><td>
When set to autoRelease, pPacket will be deleted once the data has been sent.  When set to noRelease, pPacket is not deleted.</td></tr>
</table>
</dl><dl compact><dt>
<b>Exceptions: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>SocketInstanceException</em>
&nbsp;</td><td>
 If there was a problem during the send operation. </td></tr>
</table>
</dl>    </td>
  </tr>
</table>
<a name="a6" doxytag="ssobjects::BufferedSocket::setTimeout"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td nowrap valign="top"><b> 
int ssobjects::BufferedSocket::setTimeout (
          </b></td>
          <td valign="bottom"><b>
const int <em>iTimeOut</em>&nbsp;)
          </b></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets how long to wait for incoming data before throwing.
<p>
Sets how many seconds a read or send operation will wait  before throwing an exception.     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="bufferedsocket_8h-source.html">bufferedsocket.h</a><li><a class="el" href="bufferedsocket_8cpp.html">bufferedsocket.cpp</a></ul>
<hr><address><small>Generated at Tue Sep 25 00:26:36 2001 for SimpleServerObjects by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.7 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
